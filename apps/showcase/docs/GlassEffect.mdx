import { Meta, PureArgsTable as ArgsTable, Story, Canvas, Source } from '@storybook/addon-docs/blocks';
import { GlassEffect } from '@liquid-svg-glass/react';
import * as GlassEffectStories from '../src/stories/GlassEffect.stories';
import * as DocStories from './GlassEffect.stories';

<Meta of={DocStories} />

<style>{`
  .docs-container {
    max-width: none;
    background-color: #251B30;
    color: #f8f9fa;
  }
  .feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin: 2rem 0;
  }
  .feature-card {
    padding: 1.5rem;
    border: 1px solid rgba(179, 146, 240, 0.2);
    border-radius: 8px;
    background: rgba(179, 146, 240, 0.05);
    color: #f8f9fa;
  }
  .feature-card h4 {
    margin-top: 0;
    color: #F87683;
  }
  .code-preview {
    background: rgba(179, 146, 240, 0.1);
    border: 1px solid rgba(179, 146, 240, 0.2);
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
    color: #f8f9fa;
  }
  .parameter-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
    background: rgba(179, 146, 240, 0.02);
  }
  .parameter-table th,
  .parameter-table td {
    border: 1px solid rgba(179, 146, 240, 0.2);
    padding: 0.75rem;
    text-align: left;
    color: #f8f9fa;
  }
  .parameter-table th {
    background: rgba(179, 146, 240, 0.1);
    font-weight: 600;
    color: #F87683;
  }
  .warning-box {
    background: rgba(248, 118, 131, 0.1);
    border: 1px solid rgba(248, 118, 131, 0.3);
    color: #f8f9fa;
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
  }
  .info-box {
    background: rgba(179, 146, 240, 0.1);
    border: 1px solid rgba(179, 146, 240, 0.4);
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
    color: #f8f9fa;
  }
  .success-box {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.4);
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
    color: #f8f9fa;
  }
`}</style>

# Componente GlassEffect

<div className="info-box">
  <strong>üåü Efecto Avanzado de Cristal L√≠quido</strong><br/>
  El componente `GlassEffect` es la implementaci√≥n central del efecto de "cristal l√≠quido" en este proyecto. Crea elementos visuales din√°micos que simulan la refracci√≥n y distorsi√≥n de la luz a trav√©s de una superficie de cristal, a√±adiendo un toque moderno y sofisticado a tu interfaz de usuario.
</div>

## üéØ ¬øQu√© es el Efecto de Cristal L√≠quido?

El efecto de cristal l√≠quido es un **sistema de distorsi√≥n de p√≠xeles en tiempo real** que simula ver contenido a trav√©s de cristal l√≠quido. Combina CSS avanzado con `backdrop-filter` y filtros SVG complejos para manipular los p√≠xeles del contenido detr√°s del elemento `GlassEffect`.

### Conceptos T√©cnicos Clave

- **Mapeo de Desplazamiento**: Usa valores de color para determinar el movimiento de p√≠xeles
- **Aberraci√≥n Crom√°tica**: Separa los canales RGB para una dispersi√≥n de luz realista  
- **Distorsi√≥n Progresiva**: Crea zonas de intensidad de distorsi√≥n variable
- **Procesamiento en Tiempo Real**: Todos los efectos se calculan y aplican en tiempo real

## ‚ú® Caracter√≠sticas Centrales

<div className="feature-grid">
  <div className="feature-card">
    <h4>üî¨ Simulaci√≥n F√≠sica</h4>
    <p>Incorpora aberraci√≥n crom√°tica y distorsi√≥n progresiva para un realismo visual convincente basado en la f√≠sica √≥ptica real.</p>
  </div>
  
  <div className="feature-card">
    <h4>‚öôÔ∏è Altamente Configurable</h4>
    <p>Ofrece personalizaci√≥n extensiva a trav√©s de presets predefinidos (<code>dock</code>, <code>pill</code>, <code>bubble</code>, <code>free</code>) y control granular de propiedades.</p>
  </div>
  
  <div className="feature-card">
    <h4>üéÆ Interactivo</h4>
    <p>Soporte integrado para arrastrar y posicionar gracias a la integraci√≥n perfecta con GSAP.</p>
  </div>
  
  <div className="feature-card">
    <h4>üöÄ Optimizado en Rendimiento</h4>
    <p>Dise√±ado para un rendimiento fluido usando memoizaci√≥n inteligente y funciones puras.</p>
  </div>
  
  <div className="feature-card">
    <h4>üì± Responsivo y Adaptativo</h4>
    <p>El modo AutoSize se adapta autom√°ticamente a las dimensiones del contenido, perfecto para layouts din√°micos.</p>
  </div>
  
  <div className="feature-card">
    <h4>üîß Experiencia de Desarrollador</h4>
    <p>Sistema de depuraci√≥n avanzado con logging contextual y soporte completo de TypeScript.</p>
  </div>
</div>

## üìã Referencia Completa de API

La tabla siguiente muestra todas las propiedades disponibles del componente `GlassEffect`, organizadas por categor√≠as para facilitar su comprensi√≥n y uso:

<ArgsTable of={GlassEffect} />

### üí° Gu√≠a R√°pida de Categor√≠as

- **üéØ Configuraci√≥n Principal**: Controles b√°sicos para inicializar el componente
- **üìê Dimensiones y Layout**: Tama√±o y forma del efecto de vidrio
- **‚ú® Efectos Visuales**: Propiedades que controlan la apariencia del glassmorphism
- **üåà Aberraci√≥n Crom√°tica**: Sistema avanzado de separaci√≥n de colores RGB
- **‚öôÔ∏è Controles Avanzados**: Par√°metros t√©cnicos para ajustes finos
- **üñºÔ∏è Fondo de Demostraci√≥n**: Controles espec√≠ficos para Storybook (no disponibles en producci√≥n)

## üé≠ Ejemplos de Uso

### Demostraci√≥n Principal

<Canvas>
  <Story of={GlassEffectStories.Default} />
</Canvas>

### Uso B√°sico con Presets

```tsx
import { GlassEffect } from 'react-liquid-glass';

// Efecto de cristal est√°tico con preset dock
<GlassEffect draggable={false} preset="dock">
  <nav>
    <a href="/">Inicio</a>
    <a href="/about">Acerca</a>
    <a href="/contact">Contacto</a>
  </nav>
</GlassEffect>
```

### Elemento Arrastrable Interactivo

```tsx
// Efecto de cristal arrastrable con posicionamiento personalizado
<GlassEffect 
  draggable={true} 
  preset="pill" 
  initialPosition={{ x: 50, y: 50 }}
  onMove={(position) => console.log('Movido a:', position)}
>
  <h3>¬°Arr√°strame!</h3>
  <p>Este elemento se puede mover</p>
</GlassEffect>
```

### Configuraci√≥n Personalizada Avanzada

```tsx
// Efecto de cristal altamente personalizado
<GlassEffect 
  preset="free"
  width={500} 
  height={200}
  radius={24}
  blur={15}
  frost={0.25}
  r={60} g={70} b={50}
  blend="multiply"
  alpha={0.8}
  lightness={85}
  debug={true}
>
  <div className="custom-content">
    <h2>Efecto de Cristal Personalizado</h2>
    <p>Par√°metros completamente personalizados</p>
  </div>
</GlassEffect>
```

<Canvas>
  <Story of={GlassEffectStories.Playground} />
</Canvas>

### Modo Adaptativo AutoSize

```tsx
// Se adapta autom√°ticamente al tama√±o del contenido
<GlassEffect autoSize preset="dock">
  <button className="btn-primary">
    Este bot√≥n determina el tama√±o del cristal
  </button>
</GlassEffect>
```

<div className="success-box">
  <strong>üí° Consejo Pro:</strong> El modo AutoSize es perfecto para botones, etiquetas y contenido din√°mico donde el efecto de cristal debe ajustarse perfectamente a las dimensiones del contenido.
</div>

## üé® Comparaci√≥n de Presets

<Canvas>
  <Story of={GlassEffectStories.Comparison} />
</Canvas>

### Presets Disponibles

- **`dock`**: Optimizado para barras de navegaci√≥n y docks con distorsi√≥n sutil
- **`pill`**: Perfecto para botones y etiquetas con forma de p√≠ldora  
- **`bubble`**: Distorsi√≥n mejorada para elementos flotantes
- **`free`**: M√°xima flexibilidad para configuraciones personalizadas

## üîß Caracter√≠sticas Avanzadas

### Modo Debug

Habilita el modo debug para ver los mapas de desplazamiento internos y detalles de configuraci√≥n:

```tsx
<GlassEffect debug={true} preset="dock">
  El modo debug muestra overlay de imagen de desplazamiento
</GlassEffect>
```

<div className="warning-box">
  <strong>‚ö†Ô∏è Solo para Desarrollo:</strong> El modo debug solo debe usarse durante el desarrollo ya que a√±ade overlays visuales y logging en consola.
</div>

### Consideraciones de Rendimiento

- **Memoizaci√≥n**: Toda la generaci√≥n SVG est√° memoizada - solo se regenera cuando cambian las props
- **Funciones Puras**: Las utilidades SVG no tienen efectos secundarios para un rendimiento predecible
- **Evaluaci√≥n Perezosa**: Los c√°lculos solo se realizan cuando son necesarios
- **Optimizaci√≥n del Navegador**: Los navegadores modernos optimizan los filtros SVG autom√°ticamente

### Compatibilidad de Navegadores

- **Navegadores Modernos**: Soporte completo en Chrome 76+, Firefox 70+, Safari 14+
- **Backdrop Filter**: Requiere soporte de `backdrop-filter`
- **Filtros SVG**: Soporte universal de filtros SVG
- **GSAP Draggable**: Caracter√≠stica opcional, degradaci√≥n elegante cuando no est√° disponible

## üß™ Playground Interactivo

Experimenta con todas las propiedades del componente en tiempo real:

<Canvas>
  <Story of={GlassEffectStories.Playground} />
</Canvas>

## üìö Documentaci√≥n Relacionada

- **[Implementaci√≥n T√©cnica](https://github.com/your-username/react-liquid-glass/blob/main/definitive.md)**: An√°lisis profundo del pipeline de filtros SVG
- **[Gu√≠a de Inicio](https://github.com/your-username/react-liquid-glass/blob/main/glass_effect_explanation.md)**: Explicaci√≥n simplificada de conceptos
- **[Motor de Filtros SVG](./svg-filters)**: Documentaci√≥n de utilidades centrales
- **[Definiciones de Tipos](https://github.com/your-username/react-liquid-glass/tree/main/src/types)**: Interfaces completas de TypeScript

## üöÄ Pr√≥ximos Pasos

1. **Explorar Ejemplos**: Prueba diferentes presets y configuraciones
2. **Leer Documentaci√≥n T√©cnica**: Comprende el pipeline de filtros SVG subyacente  
3. **Integrar en tu Proyecto**: A√±ade efectos de cristal l√≠quido a tus componentes
4. **Personalizar**: Crea tus propios presets y configuraciones
5. **Contribuir**: Ayuda a mejorar la librer√≠a con feedback y contribuciones

<div className="info-box">
  <strong>üéØ Listo para Producci√≥n</strong><br/>
  El componente GlassEffect est√° listo para producci√≥n con soporte completo de TypeScript, optimizaciones de rendimiento y pruebas extensivas a trav√©s de Storybook.
</div>